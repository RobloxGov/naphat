document.addEventListener("DOMContentLoaded", async function () {const apiUrl = "https://script.google.com/macros/s/AKfycbxKVN-BwwDvnKLVXxApYpzpMYh-54him6AED29B33ZBQudh0cEScYq8IqiZC6fsLdHc/exec";const container = document.querySelector(".boxes");const mainContainer = document.querySelector("main");const loadMoreContainer = document.createElement("div");loadMoreContainer.classList.add("load-more-container");const loadMoreBtn = document.createElement("button");loadMoreBtn.textContent = "ดูเพิ่มเติม";loadMoreBtn.classList.add("load-more");loadMoreContainer.appendChild(loadMoreBtn);mainContainer.appendChild(loadMoreContainer);let allData = [];let currentIndex = 0;const itemsPerPage = 3;try {const response = await fetch(apiUrl);allData = await response.json();loadMoreData();} catch (error) {console.error("Error fetching data:", error);}function loadMoreData() {const nextItems = allData.slice(currentIndex, currentIndex + itemsPerPage);nextItems.forEach(item => {const box = document.createElement("div");box.classList.add("box");box.innerHTML = `<img src="${item.img}" alt=""><h2>${item.title}</h2><div class="categories"><p>${item.categories1 || ""}</p><p>${item.categories2 || ""}</p><p style="background: ${item.color};">${item.status}</p></div><p>${item.details}</p>`;container.appendChild(box);});currentIndex += itemsPerPage;if (currentIndex >= allData.length) {loadMoreBtn.style.display = "none";}}loadMoreBtn.addEventListener("click", loadMoreData);});
